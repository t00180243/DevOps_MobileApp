language: android
sudo: false
jdk: oraclejdk8
before_cache:
- rm -f $HOME/.gradle/caches/modules-2/modules-2.lock
- rm -fr $HOME/.gradle/caches/*/plugin-resolution/
cache:
  directories:
  - "$HOME/.gradle/caches/"
  - "$HOME/.gradle/wrapper/"
env:
  global:
  - EMULATOR_API=21
  - ADB_INSTALL_TIMEOUT=5
  - ANDROID_ABI=armeabi-v7a
  - ANDROID_TAG=google_apis
android:
  components:
  - tools
  - platform-tools
  - tools
  - build-tools-26.0.2
  - build-tools-27.0.3
  - android-26
  - android-26
  - extra-google-google_play_services
  - addon-google_apis-google-26
  - extra-google-m2repository
  - extra-android-support
  - extra-android-m2repository
  - sys-img-armeabi-v7a-android-26
  - sys-img-armeabi-v7a-android-27
  licenses:
  - android-sdk-preview-license-.+
  - android-sdk-license-.+
  - google-gdk-license-.+
before_install:
- mkdir "$ANDROID_HOME/licenses" || true
- chmod +x gradlew
- "./gradlew dependencies || true"
- pip install --user codecov
addons:
  sonarcloud:
    organization: t00180243-github
    token:
      secure: 997c8e9fb9b2709d2007f80119950ddca7071034
before_script:
- android list targets
- android list sdk --extended --no-ui --all
script:
- "./gradlew assembleDebug && ./gradlew lintDebug &&./gradlew testDebug"
after_success:
- "./gradlew jacocoTestReport coveralls"
- codecov
- sonar-scanner
deploy:
  provider: heroku
  api_key:
    secure: N/0tNGz86WeynWlo4GJe+4cNOuNB4fygi9sdVeDVkvbUTPNPywbWVm4+1K0odarqVcN1+znKAymLZwp+pzjsAhscFpbpC2o3C4YUKHZoCNjvLMYZeP5oM0zghu+yN8WWEMh5Ucys375FSQZ1+4/SuTXgoxwasBoxYrwhAIyI5u/NaAio5qF/NTQ8MjiAuBHfGHeouwISd5sT7jCHeOKLfuz6ovDy1pAajQ32zaKxuS8iOwm+sA8tfOz5Ns+i9PgxQ86wLwZZERyTZ9JdQayr/kTjeLx50QfDUDhstoT/sC83RJ/1JwrIfmfy5XtFYKb+TzHz1jDVmblWH/U7beTM6wvLzasCAgs8fJRTmzj0cyyRUJpgxRlMEgj/UOkisl1mfAG7nKMWT86FrTTxcMRO4Q7V6vkCM0yLn0gRktCb0eYCuYaB6XNfJ4YVe3zOO6rgEFlDmy8S5Td8k9S7YGT14yJlqUClDhzzGYjdh6yOMdH1amBaBhit1W2pZaPXlG/NKhjdrcGCY9hM0ak4Um/tj6fTkP2+0knTOZASYC+gWp1bSvn5RLx2H4FrkrOTKQncHrRPEXZSv7pHHj/1DVApR3OBvTJkhat0bY3c+Lv9r5Cdu8Dr8ijGpKK20ge525leSu/Avw8JeNRmlZbFbRUhpx5Zxceu//p2KAUOJBhZCf4=
  app: calculator-mobileapplication
  commands:
    -git add .travis.yml
